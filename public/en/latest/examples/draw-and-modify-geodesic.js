"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[259],{5882:function(e,t,o){var n=o(1055),r=o(824),c=o(677),i=o(5002),s=o(2776),a=o(4688),f=o(3279),u=o(9066),m=o(293),g=o(4017),l=o(3814),y=o(7051),w=o(5117),d=o(4711),G=o(2893),Z=o(1733),P=o(8881),v=o(1625);const E=new G.Z({source:new w.Z}),S=new d.Z,C=new c.ZP({fill:new i.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.Z({color:"#33cc33",width:2}),image:new a.Z({radius:7,fill:new i.Z({color:"#ffcc33"})})}),p=new c.ZP({geometry:function(e){return e.get("modifyGeometry")||e.getGeometry()},fill:new i.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new s.Z({color:"#ff3333",width:2}),image:new a.Z({radius:7,fill:new i.Z({color:"rgba(0, 0, 0, 0)"})})}),h=new Z.Z({source:S,style:function(e){return"GeometryCollection"===e.getGeometry().getType()?p:C}}),k=new n.Z({layers:[E,h],target:"map",view:new r.ZP({center:[-11e6,66e5],zoom:3})}),I=new f.Z({source:S}).getOverlay().getStyleFunction(),b=new f.Z({source:S,style:function(e){return e.get("features").forEach((function(t){const o=t.get("modifyGeometry");if(o){const n=e.getGeometry().getCoordinates(),r=t.getGeometry().getGeometries(),c=r[0].getCoordinates()[0],i=r[1].getCoordinates(),s=k.getView().getProjection();let a,f,u;n[0]===i[0]&&n[1]===i[1]?(a=(0,v.vs)(c[0],s,"EPSG:4326"),f=(0,v.vs)(c[(c.length-1)/2],s,"EPSG:4326"),u=(0,P.Sp)(a,f)/2):(a=(0,v.vs)(i,s,"EPSG:4326"),f=(0,v.vs)(n,s,"EPSG:4326"),u=(0,P.Sp)(a,f));const m=(0,l.iu)((0,v.vs)(i,s,"EPSG:4326"),u,128);m.transform("EPSG:4326",s),r[0].setCoordinates(m.getCoordinates()),o.setGeometries(r)}})),I(e)}});let F,T;b.on("modifystart",(function(e){e.features.forEach((function(e){const t=e.getGeometry();"GeometryCollection"===t.getType()&&e.set("modifyGeometry",t.clone(),!0)}))})),b.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t),e.unset("modifyGeometry",!0))}))})),k.addInteraction(b);const j=document.getElementById("type");function z(){let e,t=j.value;"Geodesic"===t&&(t="Circle",e=function(e,t,o){t||(t=new g.Z([new l.ZP([]),new y.Z(e[0])]));const n=t.getGeometries(),r=(0,v.vs)(e[0],o,"EPSG:4326"),c=(0,v.vs)(e[1],o,"EPSG:4326"),i=(0,P.Sp)(r,c),s=(0,l.iu)(r,i,128);return s.transform("EPSG:4326",o),n[0].setCoordinates(s.getCoordinates()),t.setGeometries(n),t}),F=new u.ZP({source:S,type:t,geometryFunction:e}),k.addInteraction(F),T=new m.Z({source:S}),k.addInteraction(T)}j.onchange=function(){k.removeInteraction(F),k.removeInteraction(T),z()},z()}},function(e){var t;t=5882,e(e.s=t)}]);
//# sourceMappingURL=draw-and-modify-geodesic.js.map