"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8178],{5523:function(e,t,n){var o=n(9619),r=n(1644),a=n(1055),i=n(5117),s=n(4711),c=n(824),l=n(677),u=n(2776),d=n(4688),g=n(5002),w=n(7051),f=n(5925),m=n(1733),p=n(2893),h=n(1027);const y={"Clement Latour":"rgba(0, 0, 255, 0.7)","Damien de Baesnt":"rgba(0, 215, 255, 0.7)","Sylvain Dhonneur":"rgba(0, 165, 255, 0.7)","Tom Payne":"rgba(0, 255, 255, 0.7)","Ulrich Prinz":"rgba(0, 215, 255, 0.7)"},Z={},C=new s.Z,b=["data/igc/Clement-Latour.igc","data/igc/Damien-de-Baenst.igc","data/igc/Sylvain-Dhonneur.igc","data/igc/Tom-Payne.igc","data/igc/Ulrich-Prinz.igc"];function P(e,t){const n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){t(n.responseText)},n.send()}const v=new r.Z;for(let e=0;e<b.length;++e)P(b[e],(function(e){const t=v.readFeatures(e,{featureProjection:"EPSG:3857"});C.addFeatures(t)}));const T={start:1/0,stop:-1/0,duration:0};C.on("addfeature",(function(e){const t=e.feature.getGeometry();T.start=Math.min(T.start,t.getFirstCoordinate()[2]),T.stop=Math.max(T.stop,t.getLastCoordinate()[2]),T.duration=T.stop-T.start}));const k=new m.Z({source:C,style:function(e){const t=y[e.get("PLT")];let n=Z[t];return n||(n=new l.ZP({stroke:new u.Z({color:t,width:3})}),Z[t]=n),n}}),L=new a.Z({layers:[new p.Z({source:new i.Z({attributions:['All maps Â© <a href="https://www.opencyclemap.org/">OpenCycleMap</a>',i.h],url:"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=0e6fc415256d4fbb9b5166a718591d71"})}),k],target:"map",view:new c.ZP({center:[703365.7089403362,5714629.865071137],zoom:9})});let E=null,G=null;const M=function(e){const t=C.getClosestFeatureToCoordinate(e),n=document.getElementById("info");if(null===t)E=null,G=null,n.innerHTML="&nbsp;";else{const o=t.getGeometry().getClosestPoint(e);null===E?E=new w.Z(o):E.setCoordinates(o);const r=new Date(1e3*o[2]);n.innerHTML=t.get("PLT")+" ("+r.toUTCString()+")";const a=[e,[o[0],o[1]]];null===G?G=new f.Z(a):G.setCoordinates(a)}L.render()};L.on("pointermove",(function(e){if(e.dragging)return;const t=L.getEventCoordinate(e.originalEvent);M(t)})),L.on("click",(function(e){M(e.coordinate)}));const F=new u.Z({color:"rgba(255,0,0,0.9)",width:1}),S=new l.ZP({stroke:F,image:new d.Z({radius:5,fill:null,stroke:F})});k.on("postrender",(function(e){const t=(0,h.u3)(e);t.setStyle(S),null!==E&&t.drawGeometry(E),null!==G&&t.drawGeometry(G)}));const D=new m.Z({source:new s.Z,map:L,style:new l.ZP({image:new d.Z({radius:5,fill:new g.Z({color:"rgba(255,0,0,0.9)"})})})}),z=document.getElementById("time");z.addEventListener("input",(function(){const e=parseInt(z.value,10)/100,t=T.start+T.duration*e;C.forEachFeature((function(e){const n=e.getGeometry().getCoordinateAtM(t,!0);let r=e.get("highlight");void 0===r?(r=new o.Z(new w.Z(n)),e.set("highlight",r),D.getSource().addFeature(r)):r.getGeometry().setCoordinates(n)})),L.render()}))}},function(e){var t;t=5523,e(e.s=t)}]);
//# sourceMappingURL=igc.js.map